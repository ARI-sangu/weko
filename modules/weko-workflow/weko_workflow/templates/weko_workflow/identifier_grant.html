{#
# This file is part of WEKO3.
# Copyright (C) 2017 National Institute of Informatics.
#
# WEKO3 is free software; you can redistribute it
# and/or modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the
# License, or (at your option) any later version.
#
# WEKO3 is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with WEKO3; if not, write to the
# Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston,
# MA 02111-1307, USA.
#}
{%- from "weko_workflow/helpers.html" import render_identifier_link with context -%}

<div class="panel panel-default">
  <div class="panel-heading">
    <span>{{_('Identifier Grant')}}</span>
  </div>
  <div class="panel-body" style="line-height: 1.6;">
    <div class="form-group radio" style="display: inline-grid;">
      <table>
        <TR>
          {%- set idf_link_data = idf_grant_input[0] %}
          <td height="35">
            <label>
              <input type="radio" name="identifier_grant" value="{{ idf_link_data[0] }}"
                {%- if idf_link_data[0] == temporary_idf_grant %}checked{%- endif %}>
              {{ idf_link_data[1] }}
            </label>
          </td>
        </TR>
        {%- if idf_grant_data %}
        {%- set item_id = activity.item_id %}
        {%- if record %}
          {%- set item_id = '%08d' % record['_deposit']['id']|int %}
        {%- endif %}
        {%- if idf_grant_data["jalc_flag"] %}
        {%- set idf_grant_labels = idf_grant_input[1] %}
        {{ render_identifier_link(idf_grant_labels[0], idf_grant_labels[1], idf_grant_labels[2], 
                      idf_grant_method, idf_grant_data["jalc_doi"], idf_grant_data["suffix"], item, item_id) }}
        {%- endif %}
        {%- if idf_grant_data["jalc_crossref_flag"] %}
        {%- set idf_grant_labels = idf_grant_input[2] %}
        {{ render_identifier_link(idf_grant_labels[0], idf_grant_labels[1], idf_grant_labels[2], 
                    idf_grant_method, idf_grant_data["jalc_crossref_doi"], idf_grant_data["suffix"], item, item_id) }}
        {%- endif %}
        {%- if idf_grant_data["jalc_datacite_flag"] %}
        {%- set idf_grant_labels = idf_grant_input[3] %}
        {{ render_identifier_link(idf_grant_labels[0], idf_grant_labels[1], idf_grant_labels[2], 
                  idf_grant_method, idf_grant_data["jalc_datacite_doi"], idf_grant_data["suffix"], item, item_id) }}
        {%- endif %}
        {%- if idf_grant_data["cnri_flag"] %}
        {%- set idf_grant_labels = idf_grant_input[4] %}
        {{ render_identifier_link(idf_grant_labels[0], idf_grant_labels[1], idf_grant_labels[2], 
                0, idf_grant_data["cnri"], idf_grant_data["suffix"], item, item_id) }}
        {%- endif %}
        {%- endif %}
      </table>
    </div>
  </div>
</div>
<div class="m-top-20">
  <ul class="list-inline text-right" style="margin-bottom: 0;">
    <li> 
       <button type="button" class="btn btn-primary" id="btn-draft" style="width: 120px; height: 40px;font-size: 15px;">
             <span class="glyphicon glyphicon-download-alt"></span>
                {{_('Save')}}
        </button>
   </li>
    <li style="padding-right: 0;">
         <button type="button" class="btn btn-info next-button" id="btn-finish">
              {{_('Next')}}
              <span class="glyphicon glyphicon-chevron-right"></span>
         </button>
    </li>
    <li class="pull-right">
        <button ng-disabled="recordsVM.invenioRecordsLoading"
                class="btn btn-danger done-button" id="btn_quit">
          <i class="fa fa-sign-out"></i>
          {{_('Quit')}}</button>
      </li>
  </ul>
</div>
