{#
# This file is part of WEKO3.
# Copyright (C) 2017 National Institute of Informatics.
#
# WEKO3 is free software; you can redistribute it
# and/or modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the
# License, or (at your option) any later version.
#
# WEKO3 is distributed in the hope that it will be
# useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with WEKO3; if not, write to the
# Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston,
# MA 02111-1307, USA.
#}

{%- extends admin_base_template %}

{%- block body %}
<div class="container">
  <div class="row">
    <div class="col-sm-5">
      <div class="form-horizontal">
        <div class="form-group">
          <label for="txt_flow_name" class="col-sm-4 control-label">{{_('Flow Name')}}</label>
          <div class="col-sm-8">
            <input type="text" class="form-control" id="txt_flow_name" name="flow_name" value="{{flow.flow_name}}">
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-7">
      <div class="form-horizontal">
        <div class="form-group">
          <label class="col-sm-3 control-label">{{_('Flow Update')}}</label>
          <div class="col-sm-9">
            <p class="form-control-static">{{flow.modified.date()}}</p>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">{{_('Flow Author')}}</label>
          <div class="col-sm-9">
            <p class="form-control-static">{{flow.flow_user}}</p>
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label">{{_('Flow Status')}}</label>
          <div class="col-sm-9">
            <p class="form-control-static">{{_(flow.flow_status.value)}}</p>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-3 col-sm-9">
            <button type="button" class="btn btn-primary">
              <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>{{_('Edit')}}</button>
            <button type="button" class="btn btn-danger">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>{{_('Delete')}}</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row form-group">
    <div class="col-sm-12">
      <label>{{_('Activity List')}}</label>
      <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>{{_('No.')}}</th>
          <th>{{_('Activity Query')}}</th>
          <th>{{_('Activity Status')}}</th>
          <th>{{_('Activity Update')}}</th>
          <th>{{_('Change Order')}}</th>
        </tr>
      </thead>
      <tbody>
      {%- for flow in flows %}
        <tr>
          <th scope="row">{{loop.index}}</th>
          <td>{{flow.flow_name}}</td>
          <td>{{_(flow.flow_status.value)}}</td>
          <td>{{flow.modified.date()}}</td>
          <td>
            <div class="btn-group" role="group" aria-label="入替">
              <button type="button" class="btn btn-default sortable_up">↑</button>
              <button type="button" class="btn btn-default sortable_down">↓</button>
            </div>
          </td>
        </tr>
      {%- endfor %}
      </tbody>
    </table>
    <button type="button" class="btn btn-primary pull-right" id="btn_new_query">
      <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>{{_('New Query')}}</button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <label>{{_('Action List')}}</label>
      <button type="button" class="btn btn-primary pull-right" id="btn_new_transition">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>{{_('New Transition')}}</button>
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>{{_('Order')}}</th>
            <th>{{_('Action Name')}}</th>
            <th>{{_('Action Status')}}</th>
            <th>{{_('Action Update')}}</th>
            <th>{{_('Change Order')}}</th>
          </tr>
        </thead>
        <tbody>
        {%- for action in actions %}
          <tr>
            <th scope="row">{{loop.index}}</th>
            <td>{{action.action_name}}</td>
            <td>{{_(action.action_status.value)}}</td>
            <td>{{action.modified.date()}}</td>
            <td>
              <div class="btn-group" role="group" aria-label="入替">
                <button type="button" class="btn btn-default sortable_up">↑</button>
                <button type="button" class="btn btn-default sortable_down">↓</button>
              </div>
            </td>
          </tr>
        {%- endfor %}
        </tbody>
      </table>
      <button type="button" class="btn btn-primary pull-right" id="btn_more_action">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>{{_('More Action')}}</button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-10">
      <button type="button" class="btn btn-primary" id="btn_back">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>{{_('Back')}}</button>
      <button type="button" class="btn btn-primary" id="btn_submit">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>{{_('New Flow')}}</button>
    </div>
  </div>
</div>
{%- endblock %}

{% block tail %}
<script>
  $(document).ready(function() {
    $('#btn_back').on('click', function(){
      window.history.back();
    });
  });
</script>
{% endblock %}
