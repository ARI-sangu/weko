{#
  Copyright (C) 2020 National Institute of Informatics.

  WEKO3 is free software; you can redistribute it and/or
  modify it under the terms of the MIT License; see LICENSE file for more
  details.
#}
<div id="invenio-search">
  <div id="item_management_bulk_delete" class="hide">item_management_bulk_delete</div>
  <invenio-search
    {%- if index_id %}
    search-endpoint="{{ config.WEKO_SEARCH_UI_SEARCH_INDEX_API }}"
    {%- else %}
    search-endpoint="{{ config.SEARCH_UI_SEARCH_API }}"
    {%- endif %}
    search-extra-params='{"size":100}'
    search-hidden-params='{% if search_hidden_params %}{{search_hidden_params|tojson}}{% endif %}'
    search-headers='{"Accept": "{{ config.SEARCH_UI_SEARCH_MIMETYPE|default(' application/json')}}"}'
  >
  <div class="panel-group" id="search_res" ng-controller="searchResCtrl">
    <div class="panel panel-default">
      <div class="panel-heading clearfix">
      <span class="panel-title">
        {{_('Target Index')}}
      </span>
      </div>
      <div class="panel-body">
        <div class="panel-body">
          <div id="index_item_list">
            {%- if not page_id %}
            {%- if index_id %}
            <invenio-search-results
              template="{{ url_for('static', filename=config.WEKO_ITEM_MANAGEMENT_JSTEMPLATE_BREAD) }}">
            </invenio-search-results>
            {%- endif %}
            <br/>
            <input type="checkbox" id="recursively" name="recursively" style="margin: 0 10px">{{_('Delete items of child recursively')}}
            {%- endif %}
          </div>
        </div>

        {%- set delete_button_class = 'disabled' -%}
        {%- if has_items or has_child_trees -%}
        {%- set delete_button_class = '' -%}
        {%- endif -%}
        <div class="row text-center">
          <p></p>
         <!-- <a data-toggle="modal" href="#bulk_delete_confirmation"
             class="btn btn-primary btn-md {{delete_button_class}}">{{ _('Delete') }}</a>-->
            <a data-toggle="modal" href="#bulk_delete_confirmation"
             class="btn btn-danger pull-right ten-pixel-margin">
                <span class="glyphicon glyphicon-trash"></span>&nbsp
                   {{ _('Delete') }}</a>
        </div>
        <div id="bulk_delete_confirmation" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="deleteHeader"
             aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document" style="display: table; width: auto;">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="deleteHeader">WEKO</h4>
              </div>
              <div class="modal-body" style="overflow-x: auto;">
                <span class="glyphicon glyphicon-question-sign fa-3x" style="vertical-align: middle; margin: 0 10px"></span>
                {{_('Are you sure you want to delete it?')}}
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary action-button" id="bulk_delete_confirmation_continue">{{_('Continue')}}
                </button>
                <button type="button" class="btn btn-default cancel-button" data-dismiss="modal">{{_('Cancel')}}</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </invenio-search>
</div>
